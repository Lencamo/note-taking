## ä¸€ã€åŒ…å¼€å‘

### 1ã€å¼€å‘è§„èŒƒ

â‘  ç»“æ„ï¼š

- å•ç‹¬ å­˜åœ¨äºä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­
- é¡¶çº§ç›®å½•ä¸‹å¿…é¡»åŒ…å« package.json
- package.json ä¸­å¿…é¡»åŒ…å« nameã€versionã€main ä¸‰ä¸ªå±æ€§

```
renutil
â”œâ”€ index.js
â”œâ”€ package.json
â”œâ”€ README.md
â””â”€ src
   â”œâ”€ dateFormat.js
   â””â”€ htmlEscape.js
```

â‘¡ è¿è¡Œæœºåˆ¶ï¼š

&emsp;&emsp;ä½¿ç”¨ require è°ƒç”¨åŒ…æ—¶ï¼Œä¼šé¦–å…ˆæ‰¾åˆ°åŒ…æ–‡ä»¶å¤¹ä¸­çš„ package.json ä¸­çš„ main å±æ€§ï¼Œç„¶åè½¬åˆ°ç›¸åº”çš„å…¥å£æ–‡ä»¶ä¸­

â‘¢ ç‰ˆæœ¬ï¼š

&emsp;&emsp;åŒ…çš„ç‰ˆæœ¬å·æ˜¯ä»¥â€œç‚¹åˆ†åè¿›åˆ¶â€å½¢å¼è¿›è¡Œå®šä¹‰çš„ã€‚

> ä¾‹å¦‚ï¼š2.23.2

- ç¬¬ä¸€ä½æ•°å­—ï¼šå¤§ç‰ˆæœ¬
- ç¬¬äºŒä½æ•°å­—ï¼šåŠŸèƒ½ç‰ˆæœ¬
- ç¬¬ä¸‰ä½æ•°å­—ï¼šBug ä¿®å¤ç‰ˆæœ¬

### 2ã€åŒ…çš„å‘å¸ƒ

&emsp;&emsp;å‘å¸ƒåŒ…ä¹‹å‰è¦å…ˆæ³¨å†Œ npm è´¦å·ã€‚å‘å¸ƒåŒ…æ—¶ï¼Œè¦<span style="color:green">åœ¨åŒ…çš„æ ¹ç›®å½•ä¸‹</span>è¿›è¡Œã€‚

```sh
cd [åŒ…è·¯å¾„]

nrm ls
nrm use npm

npm login
npm publish

```

### 2ã€åŒ…çš„åˆ é™¤

```sh
npm unpublish [åŒ…å]
```

&emsp;&emsp;åªèƒ½åˆ é™¤å‘å¸ƒäº 24 å°æ—¶å†…çš„åŒ…ï¼Œå¹¶ä¸” 24 å°æ—¶å†…ä¸èƒ½é‡å¤å‘åŒ…ã€‚

## äºŒã€åº”ç”¨ç¤ºä¾‹

- index.js

```js
// index.jsæ–‡ä»¶ä¸ºå…¥å£æ–‡ä»¶

// å¯¼å…¥æ¨¡å—åŒ–æ‹†åˆ†çš„jsæ–‡ä»¶
const date = require('./src/dateFormat')
const escape = require('./src/htmlEscape')

// å…±äº«æ¨¡å—ä½œç”¨åŸŸ
// module.exports = {
//   dateFormat,
//   htmlEscape,
//   htmlUnEscape,
// };
// ä½¿ç”¨es6è¯­æ³•ï¼šâ€”â€” å±•å¼€ğŸš©è¿ç®—ç¬¦
module.exports = {
  ...date,
  ...escape
}
```

- package.json

```json
{
  "name": "renutil",
  "version": "1.0.0",
  "main": "index.js",

  "description": "æ ¼å¼åŒ–æ—¶é—´ï¼ŒHTML EscapeåŠŸèƒ½",
  "keywords": ["lencamo", "dateFormat", "escape"],
  "license": "ISC"
}
```

- src/dateFormat.js

```js
// ä¸€ã€æ ¼å¼åŒ–æ—¶é—´
function dateFormat(dtStr) {
  // è¿™ä¸ªæ³¨æ„åŒºåˆ«new Date()
  const dt = new Date(dtStr)
  const y = dt.getFullYear()
  const m = fixZero(dt.getMonth() + 1)
  const d = fixZero(dt.getDate())

  const hh = fixZero(dt.getHours())
  const mm = fixZero(dt.getMinutes())
  const ss = fixZero(dt.getSeconds())

  // ä½¿ç”¨ã€æ¨¡å—ğŸš©å­—ç¬¦ä¸²ã€‘ æ¥æ‹¼æ¥
  // return `YYYY-MM-DD hh:mm:ss`;
  return `${y}-${m}-${d} ${hh}:${mm}:${ss}`
}

// è‡ªå®šä¹‰è¡¥é›¶å‡½æ•°
function fixZero(n) {
  return n > 9 ? n : '0' + n
}

// å…±äº«æ¨¡å—ä½œç”¨åŸŸ
module.exports = {
  dateFormat
}
```

- src/htmlEscape.js

```js
// äºŒã€HTML EscapeåŠŸèƒ½
function htmlEscape(htmlstr) {
  return htmlstr.replace(/<|>|"|&/g, (match) => {
    switch (match) {
      case '<':
        return '&lt;'
      case '>':
        return '&gt;'
      case '"':
        return '&quot;'
      case '&':
        return '&amp;'
    }
  })
}

function htmlUnEscape(str) {
  return str.replace(/&lt;|&gt;|&quot;|&amp;/g, (match) => {
    switch (match) {
      case '&lt;':
        return '<'
      case '&gt;':
        return '>'
      case '&quot;':
        return '"'
      case '&amp;':
        return '&'
    }
  })
}

// å…±äº«æ¨¡å—ä½œç”¨åŸŸ
module.exports = {
  htmlEscape,
  htmlUnEscape
}
```
