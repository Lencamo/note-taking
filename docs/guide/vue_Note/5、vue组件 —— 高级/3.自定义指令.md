&emsp;&emsp;vue å®˜æ–¹ä¸ºæˆ‘ä»¬æä¾›äº†`v-text`ã€`v-for`ã€`v-model`ã€`v-if`ç­‰å¸¸ç”¨çš„æŒ‡ä»¤ã€‚é™¤æ­¤ä¹‹å¤– vue è¿˜å…è®¸å¼€å‘è€…è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œæ¥æ»¡è¶³è‡ªå·±çš„ä¸ªåˆ«éœ€æ±‚ã€‚

## åº”ç”¨åœºæ™¯

å®˜æ–¹ï¼š

> æœ‰çš„æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å¯¹<span style="color:red">æ™®é€š DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œ</span>ï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤ã€‚

## ä¸€ã€è‡ªå®šä¹‰æŒ‡ä»¤

&emsp;&emsp;åœ¨ vue ä¸­çš„è‡ªå®šä¹‰æŒ‡ä»¤ç±»ä¼¼äº<span style="color:green">è¿‡æ»¤å™¨</span>ï¼Œåˆ†ä¸ºä¸¤ç§

- ç§æœ‰è‡ªå®šä¹‰æŒ‡ä»¤
- å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤

&emsp;&emsp;ä¸‹é¢æˆ‘ä»¬ä»¥è‡ªå®šä¹‰ä¸€ä¸ª`v-color`æŒ‡ä»¤ä¸ºä¾‹ï¼š

### 1ã€ç§æœ‰è‡ªå®šä¹‰æŒ‡ä»¤

Test.vue

```html
<template>
  <div class="test-container">
    <!-- 2ã€ä½¿ç”¨è‡ªå®šä¹‰çš„v-coloræŒ‡ä»¤ -->
    <p v-color>æ¬¢è¿ä½¿ç”¨ directives èŠ‚ç‚¹</p>
  </div>
</template>

<script>
  export default {
    directives: {
      // 1ã€è‡ªå®šä¹‰å®šä¹‰ä¸€ä¸ª v-color æŒ‡ä»¤
      color: {
        // ä½¿ç”¨é’©å­å‡½æ•°
        // elå‚æ•°ğŸš©ï¼šè¡¨ç¤ºä½¿ç”¨å½“å‰è‡ªå®šä¹‰æŒ‡ä»¤çš„ DOMå…ƒç´ å¯¹è±¡

        // â‘  bindå‡½æ•°(æŒ‡å®šè¢«ç»‘å®šæ—¶å°±è°ƒç”¨ âœ¨â€”â€” åªè°ƒç”¨ä¸€æ¬¡)
        bind(el) {
          el.style.color = 'red'
        }
      }
    }
  }
</script>
```

### 2ã€é’©å­å‡½æ•°å‚æ•° â€”â€” binding

&emsp;&emsp;æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“å° binding å‚æ•°ï¼Œå‘ç°å®ƒçš„å®ƒæœ‰ä¸€ç³»åˆ—çš„å±æ€§ï¼ˆpropertyï¼‰

â‘  æŒ‡ä»¤åï¼š

- <span style="color:green">name</span>ï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ v- å‰ç¼€ã€‚
- rawnameï¼šæŒ‡ä»¤åï¼ŒåŒ…æ‹¬ v- å‰ç¼€ã€‚

â‘¡ ç»‘å®šçš„å€¼ï¼š

- <span style="color:green">value</span>ï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼šv-my-directive="1 + 1" ä¸­ï¼Œç»‘å®šå€¼ä¸º 2ã€‚
- expressionï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ v-my-directive="1 + 1" ä¸­ï¼Œè¡¨è¾¾å¼ä¸º "1 + 1"ã€‚

â‘¢ å…¶ä»–â€¦â€¦

```html
<script>
  export default {
    directives: {
      color: {
        bind(el, binding) {
          console.log(binding)
        }
      }
    }
  }
</script>
```

&emsp;&emsp;é€šè¿‡é’©å­å‡½æ•°çš„ binding å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥<span style="color:green">è‡ªå®šä¹‰å«æœ‰åŠ¨æ€æ•°æ®çš„è‡ªå®šä¹‰æŒ‡ä»¤</span>ã€‚

Test.vue

```html
<template>
  <div class="test-container">
    <!-- ä¸ºè‡ªå®šä¹‰æŒ‡ä»¤æ·»åŠ åŠ¨æ€âœ¨æ•°æ® -->
    <p v-color="self_color">æ¬¢è¿ä½¿ç”¨ directives èŠ‚ç‚¹</p>
  </div>
</template>

<script>
  export default {
    data() {
      return {
        self_color: 'red'
      }
    }
    directives: {
      color: {
        // â‘  bindå‡½æ•°(æŒ‡å®šè¢«ç»‘å®šæ—¶å°±è°ƒç”¨ âœ¨â€”â€” åªè°ƒç”¨ä¸€æ¬¡)
        bind (el, binding) {
          el.style.color = binding.value
        }
      }
    }
  }
</script>
```

### 3ã€é’©å­å‡½æ•°

&emsp;&emsp;å‰é¢æˆ‘ä»¬ä½¿ç”¨äº†å¸¸è§çš„`bindå‡½æ•°`ï¼Œæ­¤å¤„ä¹‹å¤–è¿˜æœ‰å…¶ä»–çš„é’©å­å‡½æ•°ï¼š

- update å‡½æ•°
- ç­‰ç­‰

&emsp;&emsp;æ ¹æ®å‰é¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å‘ç°è™½ç„¶åœ¨è‡ªå®šä¹‰æŒ‡ä»¤ä¸­çš„æ•°æ®å¯ä»¥åŠ¨æ€æŒ‡å®šï¼Œä½†åœ¨é¡µé¢åŠ è½½æ—¶ï¼Œbind å‡½æ•°åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼›è‹¥æˆ‘ä»¬é€šè¿‡å…¶ä»–æ–¹å¼è¿›ä¸€æ­¥å¯¹å…¶æ•°æ®è¿›è¡Œæ”¹å˜ï¼Œç»“æœç»‘å®šè‡ªå®šä¹‰æŒ‡ä»¤çš„ DOM å…ƒç´ å¹¶ä¸ä¼šæ›´æ–°ã€‚

â‘  è§£å†³åŠæ³•

> ä½¿ç”¨ update å‡½æ•°ï¼Œå®ƒä¼šåœ¨æ¯æ¬¡ DOM æ›´æ–°æ—¶è¢«è°ƒç”¨ã€‚

```html
<template>
  <div class="test-container">
    <p v-color="self_color">æ¬¢è¿ä½¿ç”¨ directives èŠ‚ç‚¹</p>

    <!-- æ›´æ–°<p>æ ‡ç­¾å†…å®¹çš„é¢œè‰² -->
    <button @click="color = 'green'">æ”¹å˜é¢œè‰²<button>
  </div>
</template>

<script>
  export default {
    data() {
      return {
        self_color: 'red'
      }
    }
    directives: {
      color: {
        // â‘  bindå‡½æ•°(æŒ‡å®šè¢«ç»‘å®šæ—¶å°±è°ƒç”¨ â€”â€” åªè°ƒç”¨ä¸€æ¬¡)
        bind (el, binding) {
          el.style.color = binding.value
        }

        // â‘¡ updateå‡½æ•°ï¼ˆåœ¨DOMæ›´æ–°âœ¨çš„æ—¶å€™è°ƒç”¨ï¼‰
        update (el, binding) {
          el.style.color = binding.value
        }
      }
    }
  }
</script>
```

â‘¡ ç®€å†™å½¢å¼

> åœ¨å¾ˆå¤šæ—¶å€™ï¼Œä½ å¯èƒ½æƒ³åœ¨ bind å’Œ update æ—¶è§¦å‘ç›¸åŒè¡Œä¸ºï¼Œè€Œä¸å…³å¿ƒå…¶å®ƒçš„é’©å­ã€‚å› æ­¤å¯ä»¥ç®€å†™ä¸ºï¼š

```html
<script>
  export default {
    directives: {
      color(el, binding) {
        el.style.color = binding.value
      }
    }
  }
</script>
```

## äºŒã€å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤

&emsp;&emsp;é€šè¿‡å‰é¢å¯¹ç§æœ‰è‡ªå®šä¹‰æŒ‡ä»¤çš„å­¦ä¹ åï¼Œå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤å°†ä¼šå˜å¾—ç®€å•ã€‚

&emsp;&emsp;å’Œå…¨å±€è¿‡æ»¤å™¨ä¸€æ ·ï¼Œå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤è¦å†™åœ¨`main.js`æ–‡ä»¶ä¸­ã€‚

- main.js

```js
Vue.directive('color', {
  bind (el, binding) {
    el.style.color = binding.value
  }

  update (el, binding) {
    el.style.color = binding.value
  }
})

// ç®€å†™å½¢å¼
Vue.directive('color', function (el, binding){
    el.style.color = binding.value
})
```

> æ€»çš„æ¥è¯´ï¼Œåç»­è‡ªå®šä¹‰æŒ‡ä»¤å¤§å¤šæ•°ä½¿ç”¨ å…¨å±€çš„ï¼Œè‹¥ä½¿ç”¨ç§æœ‰çš„ï¼Œè‡ªå®šä¹‰æŒ‡ä»¤ä¼˜ç‚¹å°†å¾ˆéš¾å‘æŒ¥å‡ºæ¥ã€‚
